<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
    
    <!-- Title will be dynamically updated -->
    <title>Eddy's Homepages ‚Äî Linux-j√§rjestelm√§t ja Home Assistant -oppaat</title>
    
    <!-- Enhanced meta descriptions -->
    <meta name="description" content="Askel askeleelta -oppaat Linux-j√§rjestelmist√§, Raspberry Pi:st√§, Dockerista ja Home Assistant automaatiosta. Opi rakentamaan ja turvaamaan √§lykk√§it√§ kotij√§rjestelmi√§.">
    <meta name="keywords" content="Linux, Raspberry Pi, Docker, Home Assistant, √§lykoti, automaatio, oppaat, suomeksi, kotiautomaatio, IoT">
    <meta name="author" content="Esa P">
    <meta name="image" content="https://eddyshomepages.fi/assets/profile.jpg">
    <meta name="url" content="https://eddyshomepages.fi/">
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    
    <!-- Language alternatives -->
    <link rel="alternate" hreflang="fi" href="https://eddyshomepages.fi/">
    <link rel="alternate" hreflang="en" href="https://eddyshomepages.fi/en">
    <link rel="alternate" hreflang="x-default" href="https://eddyshomepages.fi/">
    
    <!-- Canonical URL - will be updated dynamically -->
    <link rel="canonical" href="https://eddyshomepages.fi/">
    
    <!-- Enhanced Open Graph -->
    <meta property="og:site_name" content="Eddy's Homepages">
    <meta property="og:title" content="Eddy's Homepages ‚Äî Linux ja Home Assistant -oppaat">
    <meta property="og:description" content="Oppaat Linux-j√§rjestelmist√§, Raspberry Pi:st√§, Dockerista ja kotiautomaatiosta.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://eddyshomepages.fi/">
    <meta property="og:image" content="https://eddyshomepages.fi/assets/profile.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Esa P - Linux ja Home Assistant asiantuntija">
    <meta property="og:locale" content="fi_FI">
    <meta property="og:locale:alternate" content="en_US">

    <!-- Telegram specific -->
    <meta name="telegram:channel" content="@esa_p">
    
    <!-- Enhanced Twitter Cards -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Eddy's Homepages ‚Äì Linux ja Home Assistant -oppaat">
    <meta name="twitter:description" content="Askel askeleelta Linux- ja √§lykoti-oppaat suomeksi.">
    <meta name="twitter:image" content="https://eddyshomepages.fi/assets/profile.jpg">
    <meta name="twitter:image:alt" content="Esa P - Linux ja kotiautomaatio">
    
    <!-- Mastodon and Fediverse Cards -->
    <meta name="mastodon:card" content="summary_large_image">
    <meta name="mastodon:site" content="@esa_p@mastodontti.fi">
    <meta name="mastodon:creator" content="@esa_p@mastodontti.fi">
    <meta name="mastodon:title" content="Eddy's Homepages ‚Äì Linux ja Home Assistant -oppaat">
    <meta name="mastodon:description" content="Askel askeleelta Linux- ja √§lykoti-oppaat suomeksi.">
    <meta name="mastodon:image" content="https://eddyshomepages.fi/assets/profile.jpg">
    <meta name="mastodon:image:alt" content="Esa P - Linux ja kotiautomaatio">

    <!-- LinkedIn specific meta tags -->
    <meta property="linkedin:owner" content="https://fi.linkedin.com/in/esaporttila/">

    <!-- Additional meta tags -->
    <meta name="theme-color" content="#2c3e50">
    <meta name="msapplication-TileColor" content="#2c3e50">
    <meta name="application-name" content="Eddy's Homepages">
    <meta name="color-scheme" content="light dark">
    
    <!-- Critical CSS inline -->
    <style>
        body { font-family: 'Segoe UI', system-ui, sans-serif; margin: 0; line-height: 1.6; }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 15px; }
        header { background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%); color: white; padding: 1rem 0; }
        .header-content { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem; }
        .logo { font-size: 1.5rem; font-weight: bold; }
        .logo a { color: white; text-decoration: none; }
        nav ul { display: flex; list-style: none; gap: 1rem; align-items: center; margin: 0; padding: 0; }
        nav a { color: white; text-decoration: none; padding: 0.5rem; border-radius: 4px; }
        nav a:hover { background-color: rgba(255,255,255,0.1); }
    </style>
    
    <!-- Preload critical resources -->
    <link rel="preload" href="styles.css" as="style">
    <link rel="preload" href="script.js" as="script">
    <link rel="preload" as="image" href="/assets/profile-150.webp" type="image/webp">
    
    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
    <link rel="preconnect" href="https://utteranc.es">
    <link rel="dns-prefetch" href="https://giscus.app">
    
    <!-- RSS and feeds -->
    <link rel="alternate" type="application/rss+xml" title="Eddy's Homepages RSS Feed" href="/rss.xml">
    <link rel="alternate" type="application/atom+xml" title="Eddy's Homepages Atom Feed" href="/atom.xml">
    
    <!-- Favicon and icons -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png">
    <link rel="manifest" href="/manifest.json">
    
    <!-- Security headers -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com https://giscus.app https://utteranc.es; style-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com; font-src 'self' https://cdnjs.cloudflare.com; img-src 'self' data: https:; connect-src 'self' https:; frame-src https://utteranc.es;">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
        
    <!-- Non-critical CSS -->
    <link rel="stylesheet" href="styles.css">
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" media="print" onload="this.media='all'"> -->
    <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"></noscript>
    
    <!-- Enhanced Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@graph": [
        {
          "@type": "WebSite",
          "@id": "https://eddyshomepages.fi/#website",
          "url": "https://eddyshomepages.fi/",
          "name": "Eddy's Homepages",
          "description": "Linux-j√§rjestelmien ja Home Assistant automaation oppaat",
          "inLanguage": "fi-FI",
          "potentialAction": {
            "@type": "SearchAction",
            "target": "https://eddyshomepages.fi/#search?q={search_term_string}",
            "query-input": "required name=search_term_string"
          },
          "publisher": {
            "@type": "Person",
            "name": "Esa P",
            "url": "https://eddyshomepages.fi/",
            "sameAs": [
              "https://github.com/esapo/",
              "https://fi.linkedin.com/in/esaporttila/",
              "https://mastodontti.fi/@esa_p/"
            ]
          }
        },
        {
          "@type": "Blog",
          "@id": "https://eddyshomepages.fi/#blog",
          "url": "https://eddyshomepages.fi/",
          "name": "Eddy's Homepages",
          "description": "Oppaat Linux-j√§rjestelmist√§, Raspberry Pi:st√§, Dockerista ja Home Assistant automaatiosta",
          "inLanguage": "fi-FI",
          "publisher": {
            "@id": "https://eddyshomepages.fi/#person"
          },
          "author": {
            "@id": "https://eddyshomepages.fi/#person"
          }
        },
        {
          "@type": "Person",
          "@id": "https://eddyshomepages.fi/#person",
          "name": "Esa P",
          "givenName": "Esa",
          "familyName": "Porttila",
          "url": "https://eddyshomepages.fi/",
          "image": "https://eddyshomepages.fi/assets/profile.jpg",
          "sameAs": [
            "https://facebook.com/esa.porttila",
            "https://github.com/esapo/",
            "https://fi.linkedin.com/in/esaporttila/",
            "https://mastodontti.fi/@esa_p/",
            "https://t.me/esa_p/"
          ],
          "knowsAbout": [
            "Linux",
            "Home Assistant",
            "Docker",
            "Raspberry Pi",
            "Kotiautomaatio",
            "IoT"
          ],
          "jobTitle": "Intohimoinen Linux ja kotiautomaatio-harrastaja",
          "email": "pikaeetu72@gmail.com"
        }
      ]
    }
    </script>
    
    <!-- Breadcrumb structured data (will be updated dynamically) -->
    <script type="application/ld+json" id="breadcrumb-schema">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Etusivu",
          "item": "https://eddyshomepages.fi/"
        }
      ]
    }
    </script>
</head>
<body>
    <!-- Skip to main content for accessibility -->
    <a href="#main-content" class="skip-link">Siirry p√§√§sis√§lt√∂√∂n</a>
    
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <a href="#home" onclick="showFrontpage(); return false;">
                        Eddy's Homepages
                    </a>
                </div>
                <nav>
                    <ul>
                        <li><a href="#home" onclick="showFrontpage(); return false;" id="nav-home">Home</a></li>
                        <li><a href="#posts" onclick="showPosts(); return false;" id="nav-posts">Posts</a></li>
                        <li><a href="#search" onclick="showSearch(); return false;" id="nav-search">Search</a></li>
                        <li><a href="#about" onclick="showAbout(); return false;" id="nav-about">About</a></li>
                        <li>
                            <a onclick="downloadRSSFeed()" title="RSS Feed">
                                <!-- <i class="fas fa-rss"></i> -->
                                <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm1.5 2.5c5.523 0 10 4.477 10 10a1 1 0 1 1-2 0 8 8 0 0 0-8-8 1 1 0 0 1 0-2zm0 4a6 6 0 0 1 6 6 1 1 0 1 1-2 0 4 4 0 0 0-4-4 1 1 0 0 1 0-2zm.5 7a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"/></svg>     
                            </a>
                        </li>
                        <li>
                            <label for="language-selector" class="sr-only">Select language</label>
                            <select id="language-selector" onchange="changeLanguage()">
                                <option value="fi">Suomi</option>
                                <option value="en">English</option>
                            </select>
                        </li>
                        <li>
                            <button id="theme-toggle" onclick="toggleTheme()">
                                üåô
                            </button>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <div class="container">
        <main id="main-content">
            <div class="content">
                <!-- Frontpage -->
                <div class="full-post" id="frontpage-page">
                    <div id="frontpage-content">
                        <div style="padding: 2rem; text-align: center;">Ladataan etusivua...</div>
                    </div>
                </div>

                <!-- Posts listing -->
                <div class="posts-container" id="posts-content" style="display: none;">
                    <div class="hero-section">
                        <h1 class="hero-title" id="posts-title">Blog Posts</h1>
                        <p id="posts-subtitle">Your guide to Linux systems and Home Assistant automation</p>
                    </div>
                    <div class="pagination-controls">
                        <label id="pagination-label">Artikkeleita sivulla:
                            <select id="posts-per-page" onchange="changePostsPerPage(this)">
                                <option value="10" selected>10</option>
                                <option value="25">25</option>
                                <option value="50">50</option>
                                <option value="100">100</option>
                            </select>
                        </label>
                        <span id="page-info"></span>
                        <div id="pagination-buttons"></div>
                    </div>
                    <div id="posts-display">
                        <div style="padding: 2rem; text-align: center;">Ladataan artikkeleita...</div>
                    </div>
                    <div class="pagination-controls bottom">
                        <label id="pagination-label-bottom">Artikkeleita sivulla:
                            <select id="posts-per-page-bottom" onchange="changePostsPerPage(this)">
                                <option value="10" selected>10</option>
                                <option value="25">25</option>
                                <option value="50">50</option>
                                <option value="100">100</option>
                            </select>
                        </label>
                        <span id="page-info-bottom"></span>
                        <div id="pagination-buttons-bottom"></div>
                    </div>
                </div>

                <!-- Individual post view -->
                <article class="full-post" id="full-post" style="display: none;">
                    <button class="back-button" onclick="showPosts()">‚Üê Takaisin</button>
                    <div id="full-post-content"></div>
                </article>

                <!-- Search page -->
                <div class="full-post" id="search-page" style="display: none;">
                    <button class="back-button" onclick="showFrontpage()">‚Üê Takaisin</button>
                    <div id="search-content">
                        <h1 id="search-title">Search Posts</h1>
                        <div class="search-container" style="margin-bottom: 2rem;">
                            <label for="search-input" class="sr-only" id="search-label">Search term</label>
                            <input type="text" id="search-input" placeholder="Search posts by title, content, or tags..."
                                   style="width: 100%; padding: 1rem; font-size: 1.1rem; border: 2px solid #ddd; border-radius: 8px; margin-bottom: 1rem;"
                                   oninput="performSearch()">
                            <div class="tag-filters" style="margin-bottom: 1rem;">
                                <h3 id="filter-title">Filter by tags:</h3>
                                <div id="tag-filter-buttons" style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin-top: 0.5rem;"></div>
                            </div>
                            <button onclick="clearSearch()" id="clear-button" style="padding: 0.5rem 1rem; background: #95a5a6; color: white; border: none; border-radius: 4px; cursor: pointer;">Clear All</button>
                        </div>
                        <div id="search-results">
                            <p>Enter a search term or select tags to find posts...</p>
                        </div>
                    </div>
                </div>

                <!-- About page -->
                <div class="full-post" id="about-page" style="display: none;">
                    <button class="back-button" onclick="showFrontpage()">‚Üê Takaisin</button>
                    <div id="about-content">
                        <div style="padding: 2rem; text-align: center;">Ladataan tietoja-sivua...</div>
                    </div>
                </div>
            </div>

            <aside class="sidebar" style="display: flex;">
                <div class="widget">
                    <h2 id="sidebar-posts-title">Posts</h2>
                    <p id="post-count">Loading...</p>
                </div>
                <div class="widget">
                    <h2 id="sidebar-recent-title">Recent Posts</h2>
                    <ul id="recent-posts">
                        <li>Loading...</li>
                    </ul>
                </div>
            </aside>
        </main>
    </div>

    <footer>
        <div class="container">
            <p>&copy; <span id="current-year">2025</span> Esa P &middot; 
            <span id="footer-license-text">Lisensoitu</span> 
            <a href="https://opensource.org/license/MIT" target="_blank" rel="noopener" id="footer-license-link">MIT-lisenssill√§</a>
            &middot; 
            <a href="#" onclick="if(typeof cookieConsent !== 'undefined') cookieConsent.showSettings(); return false;">
                <span id="cookie-policy-text">Ev√§stek√§yt√§nt√∂</span>
            </a>
            </p>
        </div>
    </footer>

    <!-- Scripts loaded at bottom for better performance -->
    <script>
        // Critical inline JS for theme
        if (localStorage.getItem('theme') === 'dark') {
            document.documentElement.setAttribute('data-theme', 'dark');
        }
        
        // Set current year immediately
        document.getElementById('current-year').textContent = new Date().getFullYear();
    </script>
    
    <!-- External dependencies -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/9.1.2/marked.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.0.5/purify.min.js" defer></script>
    <script src="script.js" defer></script>

    <script>
        // Enhanced error handling
        window.addEventListener('error', function(e) {
            console.error('Global error:', e.error);
        });
    </script>
</body>
</html>
